{% extends 'base.html' %}
{% block content %}
<div class="card">
    <h3>Payment</h3>
    <p>Inspection Fee: <strong>{{ amount }} BDT</strong></p>
    <form method="post" id="paymentForm">
        {% csrf_token %}
        <div class="mb-3">
            <label class="form-label">Payment Method</label>
            <select name="method" class="form-control" title="Select a payment method">
                <option value="Bkash">Bkash </option>
                <option value="Bank">Bank Transfer </option>
                <option value="Card">Card </option>
            </select>
        </div>
        <button type="submit" id="payBtn" class="btn btn-primary-gradient w-100 mb-2">Pay Now</button>
    </form>

    <div id="loading" class="loading-spinner">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Processing...</span>
        </div>
        <span class="ms-2">Processing Payment...</span>
    </div>

    {% if success %}
    <div class="alert alert-success mt-3">Payment Successful âœ…</div>
    {% endif %}

    <script>
    document.getElementById('paymentForm').addEventListener('submit', function(e){
        // show loading UI and allow form to submit
        document.getElementById('payBtn').disabled = true;
        document.getElementById('loading').style.display = 'block';
    });
    </script>
</div>
{% endblock %}